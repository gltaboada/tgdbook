<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.2 Manipulación de datos | Prácticas de Tecnologías de Gestión y Manipulación de Datos</title>
  <meta name="description" content="Prácticas de la asignatura de Tecnologías de Gestión de Datos del Máster en Técnicas Estadísticas." />
  <meta name="generator" content="bookdown 0.45 and GitBook 2.6.7" />

  <meta property="og:title" content="2.2 Manipulación de datos | Prácticas de Tecnologías de Gestión y Manipulación de Datos" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Prácticas de la asignatura de Tecnologías de Gestión de Datos del Máster en Técnicas Estadísticas." />
  <meta name="github-repo" content="gltaboada/tgdbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2 Manipulación de datos | Prácticas de Tecnologías de Gestión y Manipulación de Datos" />
  
  <meta name="twitter:description" content="Prácticas de la asignatura de Tecnologías de Gestión de Datos del Máster en Técnicas Estadísticas." />
  

<meta name="author" content="Guillermo López Taboada (guillermo.lopez.taboada@udc.es), Diego Darriba (diego.darriba@udc.es) y Rubén F. Casal (ruben.fcasal@udc.es)" />


<meta name="date" content="2025-10-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="read.html"/>
<link rel="next" href="missing.html"/>
<script src="libs/jquery-3.6.1/jquery-3.6.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Prácticas de TGD</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prólogo</a></li>
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="contenidos.html"><a href="contenidos.html"><i class="fa fa-check"></i><b>1.1</b> Contenidos</a></li>
<li class="chapter" data-level="1.2" data-path="planificación-tentativa.html"><a href="planificación-tentativa.html"><i class="fa fa-check"></i><b>1.2</b> Planificación (tentativa)</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="planificación-tentativa.html"><a href="planificación-tentativa.html#evaluaci%C3%B3n"><i class="fa fa-check"></i><b>1.2.1</b> Evaluación</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="fuentes-de-información.html"><a href="fuentes-de-información.html"><i class="fa fa-check"></i><b>1.3</b> Fuentes de información:</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="fuentes-de-información.html"><a href="fuentes-de-información.html#b%C3%A1sica"><i class="fa fa-check"></i><b>1.3.1</b> Básica</a></li>
<li class="chapter" data-level="1.3.2" data-path="fuentes-de-información.html"><a href="fuentes-de-información.html#complementaria"><i class="fa fa-check"></i><b>1.3.2</b> Complementaria:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipR.html"><a href="manipR.html"><i class="fa fa-check"></i><b>2</b> Manipulación de datos con R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="read.html"><a href="read.html"><i class="fa fa-check"></i><b>2.1</b> Lectura, importación y exportación de datos</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="read.html"><a href="read.html#formato-de-datos-de-r"><i class="fa fa-check"></i><b>2.1.1</b> Formato de datos de R</a></li>
<li class="chapter" data-level="2.1.2" data-path="read.html"><a href="read.html#acceso-a-datos-en-paquetes"><i class="fa fa-check"></i><b>2.1.2</b> Acceso a datos en paquetes</a></li>
<li class="chapter" data-level="2.1.3" data-path="read.html"><a href="read.html#cap2-texto"><i class="fa fa-check"></i><b>2.1.3</b> Lectura de archivos de texto</a></li>
<li class="chapter" data-level="2.1.4" data-path="read.html"><a href="read.html#importaci%C3%B3n-desde-spss"><i class="fa fa-check"></i><b>2.1.4</b> Importación desde SPSS</a></li>
<li class="chapter" data-level="2.1.5" data-path="read.html"><a href="read.html#importaci%C3%B3n-desde-excel"><i class="fa fa-check"></i><b>2.1.5</b> Importación desde Excel</a></li>
<li class="chapter" data-level="2.1.6" data-path="read.html"><a href="read.html#cap2-exporta"><i class="fa fa-check"></i><b>2.1.6</b> Exportación de datos</a></li>
<li class="chapter" data-level="2.1.7" data-path="read.html"><a href="read.html#python-julia-y-otros-lenguajes-de-programaci%C3%B3n"><i class="fa fa-check"></i><b>2.1.7</b> Python, Julia y otros lenguajes de programación</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html"><i class="fa fa-check"></i><b>2.2</b> Manipulación de datos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#operaciones-con-variables"><i class="fa fa-check"></i><b>2.2.1</b> Operaciones con variables</a></li>
<li class="chapter" data-level="2.2.2" data-path="manipulación-de-datos.html"><a href="manipulación-de-datos.html#operaciones-con-casos"><i class="fa fa-check"></i><b>2.2.2</b> Operaciones con casos</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="missing.html"><a href="missing.html"><i class="fa fa-check"></i><b>2.3</b> Datos faltantes</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="missing.html"><a href="missing.html#funciones-apply"><i class="fa fa-check"></i><b>2.3.1</b> Funciones <code>apply</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="missing.html"><a href="missing.html#tablas-para-informes"><i class="fa fa-check"></i><b>2.3.2</b> Tablas (para informes)</a></li>
<li class="chapter" data-level="2.3.3" data-path="missing.html"><a href="missing.html#operaciones-con-tablas-de-datos"><i class="fa fa-check"></i><b>2.3.3</b> Operaciones con tablas de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ejemplo-wos-data.html"><a href="ejemplo-wos-data.html"><i class="fa fa-check"></i><b>2.4</b> Ejemplo WoS data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introSQL.html"><a href="introSQL.html"><i class="fa fa-check"></i><b>3</b> Introducción al lenguaje SQL</a>
<ul>
<li class="chapter" data-level="3.1" data-path="bases-de-datos-relacionales.html"><a href="bases-de-datos-relacionales.html"><i class="fa fa-check"></i><b>3.1</b> Bases de Datos Relacionales</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="bases-de-datos-relacionales.html"><a href="bases-de-datos-relacionales.html#definiciones"><i class="fa fa-check"></i><b>3.1.1</b> Definiciones</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="restricciones.html"><a href="restricciones.html"><i class="fa fa-check"></i><b>3.2</b> Restricciones</a></li>
<li class="chapter" data-level="3.3" data-path="sistemas-gestores-de-bases-de-datos-sgdb.html"><a href="sistemas-gestores-de-bases-de-datos-sgdb.html"><i class="fa fa-check"></i><b>3.3</b> Sistemas Gestores de Bases de Datos (SGDB)</a></li>
<li class="chapter" data-level="3.4" data-path="sintaxis-sql.html"><a href="sintaxis-sql.html"><i class="fa fa-check"></i><b>3.4</b> Sintaxis SQL</a></li>
<li class="chapter" data-level="3.5" data-path="cláusulas-básicas-de-sql.html"><a href="cláusulas-básicas-de-sql.html"><i class="fa fa-check"></i><b>3.5</b> Cláusulas básicas de SQL</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="cláusulas-básicas-de-sql.html"><a href="cláusulas-básicas-de-sql.html#lectura"><i class="fa fa-check"></i><b>3.5.1</b> Lectura</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="gestión-de-tablas.html"><a href="gestión-de-tablas.html"><i class="fa fa-check"></i><b>3.6</b> Gestión de tablas</a></li>
<li class="chapter" data-level="3.7" data-path="gestión-de-datos.html"><a href="gestión-de-datos.html"><i class="fa fa-check"></i><b>3.7</b> Gestión de datos</a></li>
<li class="chapter" data-level="3.8" data-path="gestión-de-bases-de-datos.html"><a href="gestión-de-bases-de-datos.html"><i class="fa fa-check"></i><b>3.8</b> Gestión de Bases de Datos</a></li>
<li class="chapter" data-level="3.9" data-path="ejemplos-de-consultas-sql.html"><a href="ejemplos-de-consultas-sql.html"><i class="fa fa-check"></i><b>3.9</b> Ejemplos de consultas SQL</a></li>
<li class="chapter" data-level="3.10" data-path="conexión-con-bases-de-datos-desde-r.html"><a href="conexión-con-bases-de-datos-desde-r.html"><i class="fa fa-check"></i><b>3.10</b> Conexión con bases de datos desde R</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="conexión-con-bases-de-datos-desde-r.html"><a href="conexión-con-bases-de-datos-desde-r.html#introducci%C3%B3n-a-sql-en-r"><i class="fa fa-check"></i><b>3.10.1</b> Introducción a SQL en R</a></li>
<li class="chapter" data-level="3.10.2" data-path="conexión-con-bases-de-datos-desde-r.html"><a href="conexión-con-bases-de-datos-desde-r.html#el-paquete-sqldf"><i class="fa fa-check"></i><b>3.10.2</b> El paquete sqldf</a></li>
<li class="chapter" data-level="3.10.3" data-path="conexión-con-bases-de-datos-desde-r.html"><a href="conexión-con-bases-de-datos-desde-r.html#sql-queries"><i class="fa fa-check"></i><b>3.10.3</b> SQL Queries</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="ejemplo-scopus-data.html"><a href="ejemplo-scopus-data.html"><i class="fa fa-check"></i><b>3.11</b> Ejemplo Scopus data</a></li>
<li class="chapter" data-level="3.12" data-path="ejercicios-sql-con-rsqlite.html"><a href="ejercicios-sql-con-rsqlite.html"><i class="fa fa-check"></i><b>3.12</b> Ejercicios SQL con RSQLite</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="ejercicios-sql-con-rsqlite.html"><a href="ejercicios-sql-con-rsqlite.html#setup-de-rsqlite"><i class="fa fa-check"></i><b>3.12.1</b> Setup de RSQLite</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="práctica-1-sql.html"><a href="práctica-1-sql.html"><i class="fa fa-check"></i><b>3.13</b> Práctica 1: SQL</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>4</b> Manipulación de datos con tidyverse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introTidyverse.html"><a href="introTidyverse.html"><i class="fa fa-check"></i><b>4.1</b> Introducción al ecosistema tidyverse</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="introTidyverse.html"><a href="introTidyverse.html#pipe"><i class="fa fa-check"></i><b>4.1.1</b> Operador <em>pipe</em> (redirección)</a></li>
<li class="chapter" data-level="4.1.2" data-path="introTidyverse.html"><a href="introTidyverse.html#readr"><i class="fa fa-check"></i><b>4.1.2</b> Lectura y escritura de archivos de texto</a></li>
<li class="chapter" data-level="4.1.3" data-path="introTidyverse.html"><a href="introTidyverse.html#writer"><i class="fa fa-check"></i><b>4.1.3</b> Escritura</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4.2</b> Manipulación de datos con dplyr y tidyr</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr.html"><a href="dplyr.html#dplyr-pkg"><i class="fa fa-check"></i><b>4.2.1</b> El paquete dplyr</a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr.html"><a href="dplyr.html#dplyr-variables"><i class="fa fa-check"></i><b>4.2.2</b> Operaciones con variables (columnas)</a></li>
<li class="chapter" data-level="4.2.3" data-path="dplyr.html"><a href="dplyr.html#dplyr-casos"><i class="fa fa-check"></i><b>4.2.3</b> Operaciones con casos (filas)</a></li>
<li class="chapter" data-level="4.2.4" data-path="dplyr.html"><a href="dplyr.html#tidyr-missing"><i class="fa fa-check"></i><b>4.2.4</b> Datos faltantes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tidyr-pkg.html"><a href="tidyr-pkg.html"><i class="fa fa-check"></i><b>4.3</b> Herramientas tidyr</a></li>
<li class="chapter" data-level="4.4" data-path="dplyr-join.html"><a href="dplyr-join.html"><i class="fa fa-check"></i><b>4.4</b> Operaciones con tablas de datos</a></li>
<li class="chapter" data-level="4.5" data-path="dbplyr.html"><a href="dbplyr.html"><i class="fa fa-check"></i><b>4.5</b> Bases de datos con dplyr</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="dbplyr.html"><a href="dbplyr.html#ejemplos"><i class="fa fa-check"></i><b>4.5.1</b> Ejemplos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="introducción-a-tecnologías-nosql.html"><a href="introducción-a-tecnologías-nosql.html"><i class="fa fa-check"></i><b>5</b> Introducción a Tecnologías NoSQL</a>
<ul>
<li class="chapter" data-level="5.1" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><i class="fa fa-check"></i><b>5.1</b> Conceptos y tipos de bases de datos NoSQL (documental, columnar, clave/valor y de grafos)</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#caracter%C3%ADsticas-de-las-bases-de-datos-nosql"><i class="fa fa-check"></i><b>5.1.1</b> Características de las bases de datos NoSQL</a></li>
<li class="chapter" data-level="5.1.2" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#tipos-de-bases-de-datos-nosql"><i class="fa fa-check"></i><b>5.1.2</b> Tipos de Bases de Datos NoSQL</a></li>
<li class="chapter" data-level="5.1.3" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#mongodb-nosql-documental"><i class="fa fa-check"></i><b>5.1.3</b> MongoDB: NoSQL documental</a></li>
<li class="chapter" data-level="5.1.4" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#redis-nosql-key-value"><i class="fa fa-check"></i><b>5.1.4</b> Redis: NoSQL key-value</a></li>
<li class="chapter" data-level="5.1.5" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#cassandra-nosql-columnar"><i class="fa fa-check"></i><b>5.1.5</b> Cassandra: NoSQL columnar</a></li>
<li class="chapter" data-level="5.1.6" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#neo4j-nosql-grafos"><i class="fa fa-check"></i><b>5.1.6</b> Neo4j: NoSQL grafos</a></li>
<li class="chapter" data-level="5.1.7" data-path="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html"><a href="conceptos-y-tipos-de-bases-de-datos-nosql-documental-columnar-clavevalor-y-de-grafos.html#otros-search-engines"><i class="fa fa-check"></i><b>5.1.7</b> Otros: search engines</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="conexión-de-r-a-mongodb.html"><a href="conexión-de-r-a-mongodb.html"><i class="fa fa-check"></i><b>5.2</b> Conexión de R a MongoDB</a></li>
<li class="chapter" data-level="5.3" data-path="ejercicios-prácticos-con-mongodb.html"><a href="ejercicios-prácticos-con-mongodb.html"><i class="fa fa-check"></i><b>5.3</b> Ejercicios prácticos con MongoDB</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tecnologías-para-el-tratamiendo-de-datos-masivos.html"><a href="tecnologías-para-el-tratamiendo-de-datos-masivos.html"><i class="fa fa-check"></i><b>6</b> Tecnologías para el Tratamiendo de Datos Masivos</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introducción-al-aprendizaje-estadístico.html"><a href="introducción-al-aprendizaje-estadístico.html"><i class="fa fa-check"></i><b>6.1</b> Introducción al Aprendizaje Estadístico</a></li>
<li class="chapter" data-level="6.2" data-path="tecnologías-big-data-hadoopspark-y-visualización.html"><a href="tecnologías-big-data-hadoopspark-y-visualización.html"><i class="fa fa-check"></i><b>6.2</b> Tecnologías Big Data (Hadoop/Spark y Visualización)</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tecnologías-big-data-hadoopspark-y-visualización.html"><a href="tecnologías-big-data-hadoopspark-y-visualización.html#tecnolog%C3%ADas-hadoop-spark-y-sparklyr"><i class="fa fa-check"></i><b>6.2.1</b> Tecnologías Hadoop, Spark, y Sparklyr</a></li>
<li class="chapter" data-level="6.2.2" data-path="tecnologías-big-data-hadoopspark-y-visualización.html"><a href="tecnologías-big-data-hadoopspark-y-visualización.html#big-data-y-machine-learning"><i class="fa fa-check"></i><b>6.2.2</b> Big Data y Machine Learning</a></li>
<li class="chapter" data-level="6.2.3" data-path="tecnologías-big-data-hadoopspark-y-visualización.html"><a href="tecnologías-big-data-hadoopspark-y-visualización.html#rattle-como-alternativa-a-rapidminer-en-r"><i class="fa fa-check"></i><b>6.2.3</b> Rattle como alternativa a RapidMiner en R</a></li>
<li class="chapter" data-level="6.2.4" data-path="tecnologías-big-data-hadoopspark-y-visualización.html"><a href="tecnologías-big-data-hadoopspark-y-visualización.html#visualizaci%C3%B3n-y-generaci%C3%B3n-de-cuadros-de-mando"><i class="fa fa-check"></i><b>6.2.4</b> Visualización y Generación de Cuadros de Mando</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="introducción-al-análisis-de-datos-masivos.html"><a href="introducción-al-análisis-de-datos-masivos.html"><i class="fa fa-check"></i><b>6.3</b> Introducción al Análisis de Datos Masivos</a></li>
</ul></li>
<li class="appendix"><span><b>Apendices</b></span></li>
<li class="chapter" data-level="A" data-path="links.html"><a href="links.html"><i class="fa fa-check"></i><b>A</b> Enlaces</a>
<ul>
<li class="chapter" data-level="A.1" data-path="rstudio-links.html"><a href="rstudio-links.html"><i class="fa fa-check"></i><b>A.1</b> RStudio</a></li>
<li class="chapter" data-level="A.2" data-path="bibliom-links.html"><a href="bibliom-links.html"><i class="fa fa-check"></i><b>A.2</b> Bibliometría</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="instalación-de-r.html"><a href="instalación-de-r.html"><i class="fa fa-check"></i><b>B</b> Instalación de R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="instalación-de-r-en-windows.html"><a href="instalación-de-r-en-windows.html"><i class="fa fa-check"></i><b>B.1</b> Instalación de R en Windows</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="instalación-de-r-en-windows.html"><a href="instalación-de-r-en-windows.html#asistente-de-instalaci%C3%B3n"><i class="fa fa-check"></i><b>B.1.1</b> Asistente de instalación</a></li>
<li class="chapter" data-level="B.1.2" data-path="instalación-de-r-en-windows.html"><a href="instalación-de-r-en-windows.html#instalaci%C3%B3n-de-paquetes"><i class="fa fa-check"></i><b>B.1.2</b> Instalación de paquetes</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="instalación-en-mac-os-x.html"><a href="instalación-en-mac-os-x.html"><i class="fa fa-check"></i><b>B.2</b> Instalación en Mac OS X</a></li>
<li class="chapter" data-level="B.3" data-path="instalación-opcional-de-un-entorno-o-editor-de-comandos.html"><a href="instalación-opcional-de-un-entorno-o-editor-de-comandos.html"><i class="fa fa-check"></i><b>B.3</b> Instalación (opcional) de un entorno o editor de comandos</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="instalación-opcional-de-un-entorno-o-editor-de-comandos.html"><a href="instalación-opcional-de-un-entorno-o-editor-de-comandos.html#opciones-adicionales"><i class="fa fa-check"></i><b>B.3.1</b> Opciones adicionales</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Prácticas de Tecnologías de Gestión y Manipulación de Datos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulación-de-datos" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Manipulación de datos<a href="manipulación-de-datos.html#manipulaci%C3%B3n-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Una vez cargada una (o varias) bases de datos hay una series de operaciones que serán de interés para el tratamiento de datos:</p>
<ul>
<li>Operaciones con variables:
<ul>
<li>crear</li>
<li>recodificar (e.g. categorizar)</li>
<li>…</li>
</ul></li>
<li>Operaciones con casos:
<ul>
<li>ordenar</li>
<li>filtrar</li>
<li>…</li>
</ul></li>
<li>Operaciones con tablas de datos:
<ul>
<li>unir</li>
<li>combinar</li>
<li>consultar</li>
<li>…</li>
</ul></li>
</ul>
<p>A continuación se tratan algunas operaciones <em>básicas</em>.</p>
<div id="operaciones-con-variables" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Operaciones con variables<a href="manipulación-de-datos.html#operaciones-con-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="creación-y-eliminación-de-variables" class="section level4 hasAnchor" number="2.2.1.1">
<h4><span class="header-section-number">2.2.1.1</span> Creación (y eliminación) de variables<a href="manipulación-de-datos.html#creaci%C3%B3n-y-eliminaci%C3%B3n-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Consideremos de nuevo la base de datos <code>cars</code> incluida en el paquete <code>datasets</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="manipulación-de-datos.html#cb29-1" tabindex="-1"></a><span class="fu">data</span>(cars)</span>
<span id="cb29-2"><a href="manipulación-de-datos.html#cb29-2" tabindex="-1"></a><span class="co"># str(cars)</span></span>
<span id="cb29-3"><a href="manipulación-de-datos.html#cb29-3" tabindex="-1"></a><span class="fu">head</span>(cars)</span></code></pre></div>
<pre><code>##   speed dist
## 1     4    2
## 2     4   10
## 3     7    4
## 4     7   22
## 5     8   16
## 6     9   10</code></pre>
<p>Utilizando el comando <code>help(cars)</code> se obtiene que <code>cars</code> es un data.frame con 50
observaciones y dos variables:</p>
<ul>
<li><p><code>speed</code>: Velocidad (en millas por hora)</p></li>
<li><p><code>dist</code>: tiempo hasta detenerse (en pies)</p></li>
</ul>
<p>Recordemos que, para acceder a la variable <code>speed</code> se puede
hacer directamente con su nombre o bien utilizando notación
“matricial” (se seleccionan las 6 primeras observaciones por comodidad).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="manipulación-de-datos.html#cb31-1" tabindex="-1"></a>cars<span class="sc">$</span>speed</span></code></pre></div>
<pre><code>##  [1]  4  4  7  7  8  9 10 10 10 11 11 12 12 12 12 13 13 13
## [19] 13 14 14 14 14 15 15 15 16 16 17 17 17 18 18 18 18 19
## [37] 19 19 20 20 20 20 20 22 23 24 24 24 24 25</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="manipulación-de-datos.html#cb33-1" tabindex="-1"></a><span class="co"># cars[, 1]       # Equivalente</span></span>
<span id="cb33-2"><a href="manipulación-de-datos.html#cb33-2" tabindex="-1"></a><span class="co"># cars[,&quot;speed&quot;]  # Equivalente</span></span></code></pre></div>
<p>Supongamos ahora que queremos transformar la variable original <code>speed</code>
(millas por hora) en una nueva variable <code>velocidad</code> (kilómetros por
hora) y añadir esta nueva variable al data.frame <code>cars</code>.
La transformación que permite pasar millas a kilómetros es
<code>kilómetros=millas/0.62137</code> que en R se hace directamente con:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="manipulación-de-datos.html#cb34-1" tabindex="-1"></a>(cars<span class="sc">$</span>speed<span class="sc">/</span><span class="fl">0.62137</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<p>Finalmente, incluimos la nueva variable que llamaremos
<code>velocidad</code> en <code>cars</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="manipulación-de-datos.html#cb35-1" tabindex="-1"></a>cars<span class="sc">$</span>velocidad <span class="ot">&lt;-</span> cars<span class="sc">$</span>speed <span class="sc">/</span> <span class="fl">0.62137</span></span>
<span id="cb35-2"><a href="manipulación-de-datos.html#cb35-2" tabindex="-1"></a><span class="fu">head</span>(cars)</span></code></pre></div>
<pre><code>##   speed dist velocidad
## 1     4    2  6.437388
## 2     4   10  6.437388
## 3     7    4 11.265430
## 4     7   22 11.265430
## 5     8   16 12.874777
## 6     9   10 14.484124</code></pre>
<p>También transformaremos la variable <code>dist</code> (en pies) en una nueva
variable <code>distancia</code> (en metros), por lo que la transformación deseada es
<code>metros=pies/3.2808</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="manipulación-de-datos.html#cb37-1" tabindex="-1"></a>cars<span class="sc">$</span>distancia <span class="ot">&lt;-</span> cars<span class="sc">$</span>dis <span class="sc">/</span> <span class="fl">3.2808</span></span>
<span id="cb37-2"><a href="manipulación-de-datos.html#cb37-2" tabindex="-1"></a><span class="fu">head</span>(cars)</span></code></pre></div>
<pre><code>##   speed dist velocidad distancia
## 1     4    2  6.437388 0.6096074
## 2     4   10  6.437388 3.0480371
## 3     7    4 11.265430 1.2192148
## 4     7   22 11.265430 6.7056815
## 5     8   16 12.874777 4.8768593
## 6     9   10 14.484124 3.0480371</code></pre>
<p>Ahora, eliminaremos las variables originales <code>speed</code> y
<code>dist</code>, y guardaremos el data.frame resultante con el nombre <code>coches</code>.
En primer lugar, veamos varias formas de acceder a las variables de
interés:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="manipulación-de-datos.html#cb39-1" tabindex="-1"></a>cars[, <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>)]</span>
<span id="cb39-2"><a href="manipulación-de-datos.html#cb39-2" tabindex="-1"></a>cars[, <span class="fu">c</span>(<span class="st">&quot;velocidad&quot;</span>, <span class="st">&quot;distancia&quot;</span>)]</span>
<span id="cb39-3"><a href="manipulación-de-datos.html#cb39-3" tabindex="-1"></a>cars[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]</span></code></pre></div>
<p>Utilizando alguna de las opciones anteriores se obtiene el <code>data.frame</code>
deseado:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="manipulación-de-datos.html#cb40-1" tabindex="-1"></a>coches <span class="ot">&lt;-</span> cars[, <span class="fu">c</span>(<span class="st">&quot;velocidad&quot;</span>, <span class="st">&quot;distancia&quot;</span>)]</span>
<span id="cb40-2"><a href="manipulación-de-datos.html#cb40-2" tabindex="-1"></a><span class="co"># head(coches)</span></span>
<span id="cb40-3"><a href="manipulación-de-datos.html#cb40-3" tabindex="-1"></a><span class="fu">str</span>(coches)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    50 obs. of  2 variables:
##  $ velocidad: num  6.44 6.44 11.27 11.27 12.87 ...
##  $ distancia: num  0.61 3.05 1.22 6.71 4.88 ...</code></pre>
<p>Finalmente, los datos anteriores podrían ser guardados en un fichero
exportable a Excel con el siguiente comando:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="manipulación-de-datos.html#cb42-1" tabindex="-1"></a><span class="fu">write.csv2</span>(coches, <span class="at">file =</span> <span class="st">&quot;coches.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="recodificación-de-variables" class="section level4 hasAnchor" number="2.2.1.2">
<h4><span class="header-section-number">2.2.1.2</span> Recodificación de variables<a href="manipulación-de-datos.html#recodificaci%C3%B3n-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Con el comando <code>cut()</code> podemos crear variables categóricas a partir de variables numéricas.
El parámetro <code>breaks</code> permite especificar los intervalos para la discretización, puede ser un vector con los extremos de los intervalos o un entero con el número de intervalos.
Por ejemplo, para categorizar la variable <code>cars$speed</code> en tres intervalos equidistantes podemos emplear<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="manipulación-de-datos.html#cb43-1" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">cut</span>(cars<span class="sc">$</span>speed, <span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Baja&quot;</span>, <span class="st">&quot;Media&quot;</span>, <span class="st">&quot;Alta&quot;</span>))</span>
<span id="cb43-2"><a href="manipulación-de-datos.html#cb43-2" tabindex="-1"></a><span class="fu">table</span>(fspeed)</span></code></pre></div>
<pre><code>## fspeed
##  Baja Media  Alta 
##    11    24    15</code></pre>
<p>Para categorizar esta variable en tres niveles con aproximadamente el mismo número de observaciones podríamos combinar esta función con <code>quantile()</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="manipulación-de-datos.html#cb45-1" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">quantile</span>(cars<span class="sc">$</span>speed, <span class="at">probs =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">3</span><span class="sc">/</span><span class="dv">3</span>)</span>
<span id="cb45-2"><a href="manipulación-de-datos.html#cb45-2" tabindex="-1"></a>etiquetas3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Baja&quot;</span>, <span class="st">&quot;Media&quot;</span>, <span class="st">&quot;Alta&quot;</span>)</span>
<span id="cb45-3"><a href="manipulación-de-datos.html#cb45-3" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">cut</span>(cars<span class="sc">$</span>speed, breaks, <span class="at">labels =</span> etiquetas3)</span>
<span id="cb45-4"><a href="manipulación-de-datos.html#cb45-4" tabindex="-1"></a><span class="fu">table</span>(fspeed)</span></code></pre></div>
<pre><code>## fspeed
##  Baja Media  Alta 
##    17    16    15</code></pre>
<p>Para otro tipo de recodificaciones podríamos emplear la función <code>ifelse()</code> vectorial:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="manipulación-de-datos.html#cb47-1" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(cars<span class="sc">$</span>speed <span class="sc">&lt;</span> <span class="dv">15</span>, <span class="st">&quot;Baja&quot;</span>, <span class="st">&quot;Alta&quot;</span>)</span>
<span id="cb47-2"><a href="manipulación-de-datos.html#cb47-2" tabindex="-1"></a>etiquetas2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Baja&quot;</span>, <span class="st">&quot;Alta&quot;</span>)</span>
<span id="cb47-3"><a href="manipulación-de-datos.html#cb47-3" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">factor</span>(fspeed, <span class="at">levels =</span> etiquetas2)</span>
<span id="cb47-4"><a href="manipulación-de-datos.html#cb47-4" tabindex="-1"></a><span class="fu">table</span>(fspeed)</span></code></pre></div>
<pre><code>## fspeed
## Baja Alta 
##   23   27</code></pre>
<p>Alternativamente, en el caso de dos niveles podríamos emplear directamente la función <code>factor()</code>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="manipulación-de-datos.html#cb49-1" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">factor</span>(cars<span class="sc">$</span>speed <span class="sc">&gt;=</span> <span class="dv">15</span>, </span>
<span id="cb49-2"><a href="manipulación-de-datos.html#cb49-2" tabindex="-1"></a>                 <span class="at">labels =</span> etiquetas2) <span class="co"># levels = c(&quot;FALSE&quot;, &quot;TRUE&quot;)</span></span>
<span id="cb49-3"><a href="manipulación-de-datos.html#cb49-3" tabindex="-1"></a><span class="fu">table</span>(fspeed)</span></code></pre></div>
<pre><code>## fspeed
## Baja Alta 
##   23   27</code></pre>
<p>En el caso de múltiples niveles, se podría emplear <code>ifelse()</code> anidados:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="manipulación-de-datos.html#cb51-1" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(cars<span class="sc">$</span>speed <span class="sc">&lt;</span> <span class="dv">10</span>, <span class="st">&quot;Baja&quot;</span>,</span>
<span id="cb51-2"><a href="manipulación-de-datos.html#cb51-2" tabindex="-1"></a>                 <span class="fu">ifelse</span>(cars<span class="sc">$</span>speed <span class="sc">&lt;</span> <span class="dv">20</span>, <span class="st">&quot;Media&quot;</span>, <span class="st">&quot;Alta&quot;</span>))</span>
<span id="cb51-3"><a href="manipulación-de-datos.html#cb51-3" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">factor</span>(fspeed, <span class="at">levels =</span> etiquetas3)</span>
<span id="cb51-4"><a href="manipulación-de-datos.html#cb51-4" tabindex="-1"></a><span class="fu">table</span>(fspeed)</span></code></pre></div>
<pre><code>## fspeed
##  Baja Media  Alta 
##     6    32    12</code></pre>
<p>Otra alternativa, sería emplear la función <a href="https://www.rdocumentation.org/packages/car/versions/3.0-9/topics/recode"><code>recode()</code></a> del paquete <code>car</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="manipulación-de-datos.html#cb53-1" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb53-2"><a href="manipulación-de-datos.html#cb53-2" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">recode</span>(cars<span class="sc">$</span>speed, <span class="st">&quot;0:10 = &#39;Baja&#39;; </span></span>
<span id="cb53-3"><a href="manipulación-de-datos.html#cb53-3" tabindex="-1"></a><span class="st">                 10:20 = &#39;Media&#39;;</span></span>
<span id="cb53-4"><a href="manipulación-de-datos.html#cb53-4" tabindex="-1"></a><span class="st">                 else=&#39;Alta&#39;</span></span>
<span id="cb53-5"><a href="manipulación-de-datos.html#cb53-5" tabindex="-1"></a><span class="st">                 &quot;</span>)</span>
<span id="cb53-6"><a href="manipulación-de-datos.html#cb53-6" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">factor</span>(fspeed, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Baja&quot;</span>, <span class="st">&quot;Media&quot;</span>, <span class="st">&quot;Alta&quot;</span>))</span></code></pre></div>
<p>NOTA: Para acceder directamente a las variables de un <code>data.frame</code> podríamos emplear la función <code>attach()</code> para añadirlo a la ruta de búsqueda y <code>detach()</code> al finalizar.
Sin embargo esta forma de proceder puede causar numerosos inconvenientes, especialmente al modificar la base de datos, por lo que la recomendación sería emplear <code>with()</code>.
Por ejemplo, podríamos calcular el factor anterior empleando:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="manipulación-de-datos.html#cb54-1" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">with</span>(cars, <span class="fu">ifelse</span>(speed <span class="sc">&lt;</span> <span class="dv">10</span>, <span class="st">&quot;Baja&quot;</span>,</span>
<span id="cb54-2"><a href="manipulación-de-datos.html#cb54-2" tabindex="-1"></a>                 <span class="fu">ifelse</span>(speed <span class="sc">&lt;</span> <span class="dv">20</span>, <span class="st">&quot;Media&quot;</span>, <span class="st">&quot;Alta&quot;</span>)))</span>
<span id="cb54-3"><a href="manipulación-de-datos.html#cb54-3" tabindex="-1"></a>fspeed <span class="ot">&lt;-</span> <span class="fu">factor</span>(fspeed, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Baja&quot;</span>, <span class="st">&quot;Media&quot;</span>, <span class="st">&quot;Alta&quot;</span>))</span>
<span id="cb54-4"><a href="manipulación-de-datos.html#cb54-4" tabindex="-1"></a><span class="fu">table</span>(fspeed)</span></code></pre></div>
<pre><code>## fspeed
##  Baja Media  Alta 
##     6    32    12</code></pre>
</div>
</div>
<div id="operaciones-con-casos" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Operaciones con casos<a href="manipulación-de-datos.html#operaciones-con-casos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="ordenación" class="section level4 hasAnchor" number="2.2.2.1">
<h4><span class="header-section-number">2.2.2.1</span> Ordenación<a href="manipulación-de-datos.html#ordenaci%C3%B3n" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Continuemos con el data.frame <code>cars</code>.
Se puede comprobar que los datos disponibles están ordenados por
los valores de <code>speed</code>. A continuación haremos la ordenación utilizando
los valores de <code>dist</code>. Para ello, utilizaremos el conocido como vector de
índices de ordenación.
Este vector establece el orden en que tienen que ser elegidos los
elementos para obtener la ordenación deseada.
Veamos primero un ejemplo sencillo:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="manipulación-de-datos.html#cb56-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">4.3</span>, <span class="fl">1.2</span>, <span class="fl">3.1</span>, <span class="fl">5.0</span>) <span class="co"># valores originales</span></span>
<span id="cb56-2"><a href="manipulación-de-datos.html#cb56-2" tabindex="-1"></a>ii <span class="ot">&lt;-</span> <span class="fu">order</span>(x)</span>
<span id="cb56-3"><a href="manipulación-de-datos.html#cb56-3" tabindex="-1"></a>ii    <span class="co"># vector de ordenación</span></span></code></pre></div>
<pre><code>## [1] 3 1 4 2 5</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="manipulación-de-datos.html#cb58-1" tabindex="-1"></a>x[ii] <span class="co"># valores ordenados (por defecto, ascendentemente)</span></span></code></pre></div>
<pre><code>## [1] 1.2 2.5 3.1 4.3 5.0</code></pre>
<p>En el caso de vectores, el procedimiento anterior se podría
hacer directamente con:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="manipulación-de-datos.html#cb60-1" tabindex="-1"></a><span class="fu">sort</span>(x)</span></code></pre></div>
<p>Sin embargo, para ordenar tablas de datos será necesario la utilización del
vector de índices de ordenación. A continuación, se muestan los datos de <code>cars</code> ordenados por <code>dist</code>:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="manipulación-de-datos.html#cb61-1" tabindex="-1"></a>ii <span class="ot">&lt;-</span> <span class="fu">order</span>(cars<span class="sc">$</span>dist) <span class="co"># Vector de índices de ordenación</span></span>
<span id="cb61-2"><a href="manipulación-de-datos.html#cb61-2" tabindex="-1"></a>cars2 <span class="ot">&lt;-</span> cars[ii, ]    <span class="co"># Datos ordenados por dist</span></span>
<span id="cb61-3"><a href="manipulación-de-datos.html#cb61-3" tabindex="-1"></a><span class="fu">head</span>(cars2)</span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 1      4    2  6.437388 0.6096074
## 3      7    4 11.265430 1.2192148
## 2      4   10  6.437388 3.0480371
## 6      9   10 14.484124 3.0480371
## 12    12   14 19.312165 4.2672519
## 5      8   16 12.874777 4.8768593</code></pre>
</div>
<div id="filtrado" class="section level4 hasAnchor" number="2.2.2.2">
<h4><span class="header-section-number">2.2.2.2</span> Filtrado<a href="manipulación-de-datos.html#filtrado" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>El filtrado de datos consiste en elegir una submuestra que cumpla determinadas condiciones. Para ello, se puede utilizar la función <a href="https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/subset"><code>subset(x, subset, select, drop = FALSE, ...)</code></a> , que además permite seleccionar variables con el argumento <code>select</code>.</p>
<p>A continuación se muestran un par de ejemplos:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="manipulación-de-datos.html#cb63-1" tabindex="-1"></a><span class="co"># datos con dis&gt;85</span></span>
<span id="cb63-2"><a href="manipulación-de-datos.html#cb63-2" tabindex="-1"></a><span class="fu">subset</span>(cars, dist <span class="sc">&gt;</span> <span class="dv">85</span>) </span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 47    24   92  38.62433  28.04194
## 48    24   93  38.62433  28.34674
## 49    24  120  38.62433  36.57644</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="manipulación-de-datos.html#cb65-1" tabindex="-1"></a><span class="co"># datos con speed en (10,15) y dist &gt; 45</span></span>
<span id="cb65-2"><a href="manipulación-de-datos.html#cb65-2" tabindex="-1"></a><span class="fu">subset</span>(cars, speed <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> speed <span class="sc">&lt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> dist <span class="sc">&gt;</span> <span class="dv">45</span>)</span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 19    13   46  20.92151  14.02097
## 22    14   60  22.53086  18.28822
## 23    14   80  22.53086  24.38430</code></pre>
<p>También se pueden hacer el filtrado empleando directamente los
correspondientes vectores de índices:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="manipulación-de-datos.html#cb67-1" tabindex="-1"></a>ii <span class="ot">&lt;-</span> cars<span class="sc">$</span>dist <span class="sc">&gt;</span> <span class="dv">85</span></span>
<span id="cb67-2"><a href="manipulación-de-datos.html#cb67-2" tabindex="-1"></a>cars[ii, ]   <span class="co"># dis&gt;85</span></span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 47    24   92  38.62433  28.04194
## 48    24   93  38.62433  28.34674
## 49    24  120  38.62433  36.57644</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="manipulación-de-datos.html#cb69-1" tabindex="-1"></a>ii <span class="ot">&lt;-</span> cars<span class="sc">$</span>speed <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> cars<span class="sc">$</span>speed <span class="sc">&lt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> cars<span class="sc">$</span>dist <span class="sc">&gt;</span> <span class="dv">45</span></span>
<span id="cb69-2"><a href="manipulación-de-datos.html#cb69-2" tabindex="-1"></a>cars[ii, ]  <span class="co"># speed en (10,15) y dist&gt;45</span></span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 19    13   46  20.92151  14.02097
## 22    14   60  22.53086  18.28822
## 23    14   80  22.53086  24.38430</code></pre>
<p>En este caso, puede ser de utilidad la función <a href="https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/which"><code>which()</code></a>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="manipulación-de-datos.html#cb71-1" tabindex="-1"></a>it <span class="ot">&lt;-</span> <span class="fu">which</span>(ii)</span>
<span id="cb71-2"><a href="manipulación-de-datos.html#cb71-2" tabindex="-1"></a><span class="fu">str</span>(it)</span></code></pre></div>
<pre><code>##  int [1:3] 19 22 23</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="manipulación-de-datos.html#cb73-1" tabindex="-1"></a>cars[it, ]</span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 19    13   46  20.92151  14.02097
## 22    14   60  22.53086  18.28822
## 23    14   80  22.53086  24.38430</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="manipulación-de-datos.html#cb75-1" tabindex="-1"></a><span class="co"># rownames(cars[it, ])</span></span>
<span id="cb75-2"><a href="manipulación-de-datos.html#cb75-2" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span>ii)</span>
<span id="cb75-3"><a href="manipulación-de-datos.html#cb75-3" tabindex="-1"></a><span class="fu">str</span>(cars[id, ])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    47 obs. of  4 variables:
##  $ speed    : num  4 4 7 7 8 9 10 10 10 11 ...
##  $ dist     : num  2 10 4 22 16 10 18 26 34 17 ...
##  $ velocidad: num  6.44 6.44 11.27 11.27 12.87 ...
##  $ distancia: num  0.61 3.05 1.22 6.71 4.88 ...</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="manipulación-de-datos.html#cb77-1" tabindex="-1"></a><span class="co"># Equivalentemente:</span></span>
<span id="cb77-2"><a href="manipulación-de-datos.html#cb77-2" tabindex="-1"></a><span class="fu">str</span>(cars[<span class="sc">-</span>it, ])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    47 obs. of  4 variables:
##  $ speed    : num  4 4 7 7 8 9 10 10 10 11 ...
##  $ dist     : num  2 10 4 22 16 10 18 26 34 17 ...
##  $ velocidad: num  6.44 6.44 11.27 11.27 12.87 ...
##  $ distancia: num  0.61 3.05 1.22 6.71 4.88 ...</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="manipulación-de-datos.html#cb79-1" tabindex="-1"></a><span class="co"># ?which.min</span></span></code></pre></div>
<p>Si se realiza una selección de variables como en:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="manipulación-de-datos.html#cb80-1" tabindex="-1"></a>cars[ii, <span class="st">&quot;speed&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 13 14 14</code></pre>
<p>es posible que se quiera mantener la estructura original de los datos, para ello,
bastaría con:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="manipulación-de-datos.html#cb82-1" tabindex="-1"></a>cars[ii, <span class="st">&quot;speed&quot;</span>, drop<span class="ot">=</span><span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>##    speed
## 19    13
## 22    14
## 23    14</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="manipulación-de-datos.html#cb84-1" tabindex="-1"></a><span class="co"># subset(cars, ii, &quot;speed&quot;) # equivalente</span></span></code></pre></div>
<p>A veces puede ser necesario dividir (particionar) el conjunto de datos, uno para cada nivel de un grupo (factor), para ello se puede usar la función <code>split()</code>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="manipulación-de-datos.html#cb85-1" tabindex="-1"></a>speed2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(cars<span class="sc">$</span>speed <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;slow&quot;</span>,<span class="st">&quot;fast&quot;</span>))</span>
<span id="cb85-2"><a href="manipulación-de-datos.html#cb85-2" tabindex="-1"></a><span class="fu">table</span>(speed2)</span></code></pre></div>
<pre><code>## speed2
## slow fast 
##   43    7</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="manipulación-de-datos.html#cb87-1" tabindex="-1"></a>cars2 <span class="ot">&lt;-</span> <span class="fu">split</span>(cars,speed2)</span>
<span id="cb87-2"><a href="manipulación-de-datos.html#cb87-2" tabindex="-1"></a><span class="fu">class</span>(cars2) <span class="co"># lista con 2 data.frames</span></span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="manipulación-de-datos.html#cb89-1" tabindex="-1"></a><span class="fu">sapply</span>(cars2,class)</span></code></pre></div>
<pre><code>##         slow         fast 
## &quot;data.frame&quot; &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="manipulación-de-datos.html#cb91-1" tabindex="-1"></a><span class="fu">sapply</span>(cars2,dim)</span></code></pre></div>
<pre><code>##      slow fast
## [1,]   43    7
## [2,]    4    4</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="manipulación-de-datos.html#cb93-1" tabindex="-1"></a>cars2<span class="sc">$</span>fast</span></code></pre></div>
<pre><code>##    speed dist velocidad distancia
## 44    22   66  35.40564  20.11704
## 45    23   54  37.01498  16.45940
## 46    24   70  38.62433  21.33626
## 47    24   92  38.62433  28.04194
## 48    24   93  38.62433  28.34674
## 49    24  120  38.62433  36.57644
## 50    25   85  40.23368  25.90832</code></pre>
<p>De forma inversa, podríamos recuperar el data.frame original con:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="manipulación-de-datos.html#cb95-1" tabindex="-1"></a><span class="fu">unsplit</span>(cars2,speed2)</span></code></pre></div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Aunque si el objetivo es obtener las frecuencias de cada intervalo puede ser más eficiente emplear <code>hist()</code> con <code>plot = FALSE</code>.<a href="manipulación-de-datos.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="read.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/gltaboada/tgdbook/edit/master/02-ManipulacionDatosR.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["Practicas_de_TGD.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
